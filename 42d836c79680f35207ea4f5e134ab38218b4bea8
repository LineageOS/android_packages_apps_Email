{
  "comments": [
    {
      "key": {
        "uuid": "ba5201f7_50b9ec2d",
        "filename": "provider_src/com/android/email/mail/store/ImapFolder.java",
        "patchSetId": 1
      },
      "lineNbr": 1512,
      "author": {
        "id": 3134
      },
      "writtenOn": "2015-06-10T02:25:21Z",
      "side": 1,
      "message": "sync here?",
      "revId": "42d836c79680f35207ea4f5e134ab38218b4bea8",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ba5201f7_90819450",
        "filename": "provider_src/com/android/email/mail/store/ImapFolder.java",
        "patchSetId": 1
      },
      "lineNbr": 1512,
      "author": {
        "id": 1063
      },
      "writtenOn": "2015-06-10T02:30:22Z",
      "side": 1,
      "message": "My thought was that we can\u0027t idle on a folder that\u0027s not yet initialized anyway.",
      "parentUuid": "ba5201f7_50b9ec2d",
      "revId": "42d836c79680f35207ea4f5e134ab38218b4bea8",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ba5201f7_10af64e4",
        "filename": "provider_src/com/android/email/mail/store/ImapFolder.java",
        "patchSetId": 1
      },
      "lineNbr": 1601,
      "author": {
        "id": 3134
      },
      "writtenOn": "2015-06-10T02:25:21Z",
      "side": 1,
      "message": "it is better to use !\u003d ? imo, we want increments and decrements, right?",
      "revId": "42d836c79680f35207ea4f5e134ab38218b4bea8",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ba5201f7_b0869863",
        "filename": "provider_src/com/android/email/mail/store/ImapFolder.java",
        "patchSetId": 1
      },
      "lineNbr": 1601,
      "author": {
        "id": 1063
      },
      "writtenOn": "2015-06-10T02:30:22Z",
      "side": 1,
      "message": "How can there be new messages if the message count decremented? :)",
      "parentUuid": "ba5201f7_10af64e4",
      "revId": "42d836c79680f35207ea4f5e134ab38218b4bea8",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ba5201f7_b0edb827",
        "filename": "provider_src/com/android/email/mail/store/ImapFolder.java",
        "patchSetId": 1
      },
      "lineNbr": 1601,
      "author": {
        "id": 3134
      },
      "writtenOn": "2015-06-10T02:45:58Z",
      "side": 1,
      "message": "expunge command only (no new messages or deleted message \u003e new messages)?",
      "parentUuid": "ba5201f7_b0869863",
      "revId": "42d836c79680f35207ea4f5e134ab38218b4bea8",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ba5201f7_b0d4d847",
        "filename": "provider_src/com/android/email/mail/store/ImapFolder.java",
        "patchSetId": 1
      },
      "lineNbr": 1601,
      "author": {
        "id": 1063
      },
      "writtenOn": "2015-06-10T19:37:59Z",
      "side": 1,
      "message": "But in that case we do a normal sync anyway, don\u0027t we?",
      "parentUuid": "ba5201f7_b0edb827",
      "revId": "42d836c79680f35207ea4f5e134ab38218b4bea8",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ba5201f7_30ac68ed",
        "filename": "provider_src/com/android/email/mail/store/ImapFolder.java",
        "patchSetId": 1
      },
      "lineNbr": 1607,
      "author": {
        "id": 3134
      },
      "writtenOn": "2015-06-10T02:25:21Z",
      "side": 1,
      "message": "decrement here only should happends if there isn\u0027t a previous EXISTS op. So EXISTS have the EXPUNGE in its count if they come in the same batch of ops. Otherwise, we get EXISTS count and decrement the EXPUNGE ones, which i think is wrong",
      "revId": "42d836c79680f35207ea4f5e134ab38218b4bea8",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ba5201f7_d07b1c7a",
        "filename": "provider_src/com/android/email/mail/store/ImapFolder.java",
        "patchSetId": 1
      },
      "lineNbr": 1607,
      "author": {
        "id": 1063
      },
      "writtenOn": "2015-06-10T02:30:22Z",
      "side": 1,
      "message": "I\u0027m not sure I can agree here. I\u0027d expect something like this:\n\n* 10 EXISTS\n....\n* 10 EXISTS\n* 5 EXPUNGE\n\n\nor\n\n\n* 10 EXISTS\n....\n* 5 EXPUNGE\n* 9 EXISTS\n\n\nIOW, I\u0027d expect EXISTS to reflect the state up to and including all received messages, but not the following ones. Do the RFCs mention anything in that regard?",
      "parentUuid": "ba5201f7_30ac68ed",
      "revId": "42d836c79680f35207ea4f5e134ab38218b4bea8",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ba5201f7_d0f23c06",
        "filename": "provider_src/com/android/email/mail/store/ImapFolder.java",
        "patchSetId": 1
      },
      "lineNbr": 1607,
      "author": {
        "id": 3134
      },
      "writtenOn": "2015-06-10T02:45:58Z",
      "side": 1,
      "message": "https://tools.ietf.org/html/rfc2177 page 2. For that example, I understand that expunge only have the deleted messages, while EXISTS contains the total count. If some server invert the order, we are in my related case. The rfc doesn\u0027t specify the order.",
      "parentUuid": "ba5201f7_d07b1c7a",
      "revId": "42d836c79680f35207ea4f5e134ab38218b4bea8",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ba5201f7_10dda470",
        "filename": "provider_src/com/android/email/mail/store/ImapFolder.java",
        "patchSetId": 1
      },
      "lineNbr": 1607,
      "author": {
        "id": 3134
      },
      "writtenOn": "2015-06-10T02:47:12Z",
      "side": 1,
      "message": "And we probably should add a \u003c0 check to avoid decrement below 0 if we are out of sync.",
      "parentUuid": "ba5201f7_d0f23c06",
      "revId": "42d836c79680f35207ea4f5e134ab38218b4bea8",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ba5201f7_36238007",
        "filename": "provider_src/com/android/email/mail/store/ImapFolder.java",
        "patchSetId": 1
      },
      "lineNbr": 1607,
      "author": {
        "id": 1063
      },
      "writtenOn": "2015-06-10T19:37:59Z",
      "side": 1,
      "message": "Yep, will do that.",
      "parentUuid": "ba5201f7_10dda470",
      "revId": "42d836c79680f35207ea4f5e134ab38218b4bea8",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ba5201f7_16267c16",
        "filename": "provider_src/com/android/email/mail/store/ImapFolder.java",
        "patchSetId": 1
      },
      "lineNbr": 1607,
      "author": {
        "id": 1063
      },
      "writtenOn": "2015-06-10T19:37:59Z",
      "side": 1,
      "message": "It indeed doesn\u0027t specify the order explicitly, but from the specification of EXPUNGE and EXISTS I would expect the order to be correct anyway: EXISTS gives the number of messages in the mailbox at the time of reading the EXISTS response, so following EXPUNGE responses aren\u0027t reflected in that number. When not following that, the protocol would be prone to timing issues (what if the EXPUNGE response is significantly delayed in the network), so I doubt it\u0027s implemented like that in mail servers.\n\n(Additional data point: K-9 seems to get away with this logic just fine)",
      "parentUuid": "ba5201f7_d0f23c06",
      "revId": "42d836c79680f35207ea4f5e134ab38218b4bea8",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71",
      "unresolved": false
    }
  ]
}